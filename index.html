<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue Boolzapp</title>
    <!-- bootstrap -->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3' crossorigin='anonymous'>
    <!-- fontawesome -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css' integrity='sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==' crossorigin='anonymous' referrerpolicy='no-referrer'
    />
    <!-- css -->
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>
    <main id="site_main">
        <div class="background_top"></div>
        <!-- /.background_top -->

        <div id="app">
            <div class="container">
                <div class="row row-cols-2 h-100">
                    <div class="cols w_35 h-100 bg-white">
                        <div class="user_panel d-flex justify-content-between p-2">
                            <div class="user h-100 d-flex justify-content-center align-items-center gap-2">
                                <img src="./assets/img/avatar_io.jpg" alt="User Avatar">
                                <div class="user_name">
                                    <strong>
                                        Sofia
                                    </strong>
                                </div>
                            </div>
                            <div class="user_option h-100 d-flex align-items-center gap-4">
                                <i class="fa-solid fa-circle-notch fa-xl"></i>
                                <i class="fa-solid fa-message fa-xl"></i>
                                <i class="fa-solid fa-ellipsis-vertical fa-xl"></i>
                            </div>
                        </div>
                        <!-- /.user_panel -->

                        <div class="alert_notify d-flex align-items-center gap-2 p-3">
                            <div class="notify_icon justify-content-center align-items-center">
                                <i class="fa-solid fa-bell-slash fa-xl"></i>
                            </div>
                            <div class="notify_desc d-flex flex-column">
                                <div class="notify_title">
                                    Ricevi notifiche di nuovi messaggi
                                </div>
                                <div class="notify_active">
                                    Attiva notifiche desktop
                                </div>
                            </div>
                        </div>
                        <!-- /.alert_notify -->

                        <div class="search_chat p-2 d-flex">
                            <div class="search_icon d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </div>
                            <input type="search" class="w-100" v-model="search" placeholder="Cerca o inizia una nuova chat">
                        </div>
                        <!-- /.search_chat -->

                        <div class="container_chat d-flex flex-column">

                            <div class="contact d-flex justify-content-around gap-2 px-3 py-2 bb_grey" v-for="(contact, i) in filteredChat" @click="active = i">
                                <!-- :class="index === active ? ''active" : '' " -->

                                <div class="contact_img justify-content-center align-items-center">

                                    <img :src="'./assets/img/avatar'+contact.avatar+'.jpg'" :alt="contact.name + 'avatar'">
                                </div>
                                <div class="contact_info d-flex flex-column">
                                    <div class="contact_name">
                                        <strong>
                                            {{contact.name}}
                                        </strong>
                                    </div>
                                    <div class="contact_last_message">
                                        {{contact.messages[contact.messages.length -1].message}}
                                    </div>
                                </div>

                                <div class="contact_time ms-auto">
                                    {{contact.messages[contact.messages.length -1].hours}}
                                </div>
                            </div>
                            <!-- /.contact -->




                        </div>
                        <!-- /.container_chat -->
                    </div>
                    <!-- /.cols -->

                    <div class="cols w_65 h-100">
                        <div class="user_chat d-flex p-2 gap-2">
                            <div class="user_active_chat">
                                <img src="./assets/img/avatar_1.jpg" alt="">
                            </div>

                            <div class="chat_info d-flex flex-column justify-content-center">
                                <div class="contact_name">
                                    <strong>
                                        {{contacts[active].name}}
                                    </strong>
                                </div>
                                <div class="contact_last_message_chat">
                                    Ultimo accesso il {{contacts[active].messages[contacts[active].messages.length -1].date}}
                                </div>
                            </div>

                            <div class="user_option h-100 d-flex align-items-center gap-4 ms-auto pe-3">
                                <i class="fa-solid fa-magnifying-glass fa-xl"></i>
                                <i class="fa-solid fa-paperclip fa-xl"></i>
                                <i class="fa-solid fa-ellipsis-vertical fa-xl"></i>
                            </div>

                        </div>
                        <!-- /.user_chat -->

                        <div class="chat_area p-4">
                            <div class="message d-flex" v-for="(message, i) in contacts[active].messages">
                                <span :class="message.status == 'sent'? 'sent_message' : 'received_message'">
                                    {{message.message}}
                                </span>

                            </div>
                        </div>
                        <!-- /.chat_area -->

                        <div class="text_chat_area d-flex align-items-center justify-content-around">
                            <div class="emoji px-5">
                                <i class="fa-regular fa-face-smile fa-xl"></i>
                            </div>

                            <div class="text w-100">
                                <input type="text" class="w-100 py-2 px-2" placeholder="Scrivi un messaggio" v-model="textInput" @keyup.enter="sendMessage">
                            </div>

                            <div class="voice px-5">
                                <i class="fa-solid fa-microphone fa-xl"></i>
                            </div>

                        </div>
                        <!-- /.text_chat_area -->
                    </div>
                    <!-- /.cols -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container -->
        </div>
        <!-- /#app -->

    </main>
    <!-- /#site_main -->

    <!-- Vue2 js -->
    <script src='https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js'></script>
    <script src="./assets/js/app.js"></script>
</body>

</html>